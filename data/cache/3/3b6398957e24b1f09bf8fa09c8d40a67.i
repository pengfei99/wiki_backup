a:118:{i:0;a:3:{i:0;s:14:"document_start";i:1;a:0:{}i:2;i:0;}i:1;a:3:{i:0;s:6:"header";i:1;a:3:{i:0;s:26:"Lesson09: Monitoring Kafka";i:1;i:1;i:2;i:1;}i:2;i:1;}i:2;a:3:{i:0;s:12:"section_open";i:1;a:1:{i:0;i:1;}i:2;i:1;}i:3;a:3:{i:0;s:13:"section_close";i:1;a:0:{}i:2;i:43;}i:4;a:3:{i:0;s:6:"header";i:1;a:3:{i:0;s:17:"9.1 Metric basics";i:1;i:2;i:2;i:43;}i:2;i:43;}i:5;a:3:{i:0;s:12:"section_open";i:1;a:1:{i:0;i:2;}i:2;i:43;}i:6;a:3:{i:0;s:13:"section_close";i:1;a:0:{}i:2;i:73;}i:7;a:3:{i:0;s:6:"header";i:1;a:3:{i:0;s:18:"9.2 Broker metrics";i:1;i:2;i:2;i:73;}i:2;i:73;}i:8;a:3:{i:0;s:12:"section_open";i:1;a:1:{i:0;i:2;}i:2;i:73;}i:9;a:3:{i:0;s:13:"section_close";i:1;a:0:{}i:2;i:104;}i:10;a:3:{i:0;s:6:"header";i:1;a:3:{i:0;s:21:"9.3 Client monitoring";i:1;i:2;i:2;i:104;}i:2;i:104;}i:11;a:3:{i:0;s:12:"section_open";i:1;a:1:{i:0;i:2;}i:2;i:104;}i:12;a:3:{i:0;s:13:"section_close";i:1;a:0:{}i:2;i:141;}i:13;a:3:{i:0;s:6:"header";i:1;a:3:{i:0;s:42:"9.4 Yahoo Cluster Manager for Apache Kafka";i:1;i:2;i:2;i:141;}i:2;i:141;}i:14;a:3:{i:0;s:12:"section_open";i:1;a:1:{i:0;i:2;}i:2;i:141;}i:15;a:3:{i:0;s:6:"p_open";i:1;a:0:{}i:2;i:141;}i:16;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:559:"为了简化开发者和服务工程师维护Kafka集群的工作，yahoo构建了一个叫做Kafka管理器的基于Web工具，叫做 CMAK (Cluster Manager for Apache Kafka, previously known as Kafka Manager)。这个管理工具可以很容易地发现分布在集群中的哪些topic分布不均匀，或者是分区在整个集群分布不均匀的的情况。它支持管理多个集群、选择副本、副本重新分配以及创建Topic。同时，这个管理工具也是一个非常好的可以快速浏览这个集群的工具，有如下功能：";}i:2;i:197;}i:17;a:3:{i:0;s:7:"p_close";i:1;a:0:{}i:2;i:756;}i:18;a:3:{i:0;s:10:"listo_open";i:1;a:0:{}i:2;i:756;}i:19;a:3:{i:0;s:13:"listitem_open";i:1;a:1:{i:0;i:1;}i:2;i:756;}i:20;a:3:{i:0;s:16:"listcontent_open";i:1;a:0:{}i:2;i:756;}i:21;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:24:" 管理多个kafka集群";}i:2;i:760;}i:22;a:3:{i:0;s:17:"listcontent_close";i:1;a:0:{}i:2;i:784;}i:23;a:3:{i:0;s:14:"listitem_close";i:1;a:0:{}i:2;i:784;}i:24;a:3:{i:0;s:13:"listitem_open";i:1;a:1:{i:0;i:1;}i:2;i:784;}i:25;a:3:{i:0;s:16:"listcontent_open";i:1;a:0:{}i:2;i:784;}i:26;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:87:" 便捷的检查kafka集群状态(topics,brokers,备份分布情况,分区分布情况)";}i:2;i:788;}i:27;a:3:{i:0;s:17:"listcontent_close";i:1;a:0:{}i:2;i:875;}i:28;a:3:{i:0;s:14:"listitem_close";i:1;a:0:{}i:2;i:875;}i:29;a:3:{i:0;s:13:"listitem_open";i:1;a:1:{i:0;i:1;}i:2;i:875;}i:30;a:3:{i:0;s:16:"listcontent_open";i:1;a:0:{}i:2;i:875;}i:31;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:28:" 选择你要运行的副本";}i:2;i:879;}i:32;a:3:{i:0;s:17:"listcontent_close";i:1;a:0:{}i:2;i:907;}i:33;a:3:{i:0;s:14:"listitem_close";i:1;a:0:{}i:2;i:907;}i:34;a:3:{i:0;s:13:"listitem_open";i:1;a:1:{i:0;i:1;}i:2;i:907;}i:35;a:3:{i:0;s:16:"listcontent_open";i:1;a:0:{}i:2;i:907;}i:36;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:31:" 基于当前分区状况进行";}i:2;i:911;}i:37;a:3:{i:0;s:17:"listcontent_close";i:1;a:0:{}i:2;i:942;}i:38;a:3:{i:0;s:14:"listitem_close";i:1;a:0:{}i:2;i:942;}i:39;a:3:{i:0;s:13:"listitem_open";i:1;a:1:{i:0;i:1;}i:2;i:942;}i:40;a:3:{i:0;s:16:"listcontent_open";i:1;a:0:{}i:2;i:942;}i:41;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:70:" 可以选择topic配置并创建topic(0.8.1.1和0.8.2的配置不同)";}i:2;i:946;}i:42;a:3:{i:0;s:17:"listcontent_close";i:1;a:0:{}i:2;i:1016;}i:43;a:3:{i:0;s:14:"listitem_close";i:1;a:0:{}i:2;i:1016;}i:44;a:3:{i:0;s:13:"listitem_open";i:1;a:1:{i:0;i:1;}i:2;i:1016;}i:45;a:3:{i:0;s:16:"listcontent_open";i:1;a:0:{}i:2;i:1016;}i:46;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:100:" 删除topic(只支持0.8.2以上的版本并且要在broker配置中设置delete.topic.enable=true)";}i:2;i:1020;}i:47;a:3:{i:0;s:17:"listcontent_close";i:1;a:0:{}i:2;i:1120;}i:48;a:3:{i:0;s:14:"listitem_close";i:1;a:0:{}i:2;i:1120;}i:49;a:3:{i:0;s:13:"listitem_open";i:1;a:1:{i:0;i:1;}i:2;i:1120;}i:50;a:3:{i:0;s:16:"listcontent_open";i:1;a:0:{}i:2;i:1120;}i:51;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:72:" Topic list会指明哪些topic被删除（在0.8.2以上版本适用）";}i:2;i:1124;}i:52;a:3:{i:0;s:17:"listcontent_close";i:1;a:0:{}i:2;i:1196;}i:53;a:3:{i:0;s:14:"listitem_close";i:1;a:0:{}i:2;i:1196;}i:54;a:3:{i:0;s:13:"listitem_open";i:1;a:1:{i:0;i:1;}i:2;i:1196;}i:55;a:3:{i:0;s:16:"listcontent_open";i:1;a:0:{}i:2;i:1196;}i:56;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:33:" 为已存在的topic增加分区";}i:2;i:1200;}i:57;a:3:{i:0;s:17:"listcontent_close";i:1;a:0:{}i:2;i:1233;}i:58;a:3:{i:0;s:14:"listitem_close";i:1;a:0:{}i:2;i:1233;}i:59;a:3:{i:0;s:13:"listitem_open";i:1;a:1:{i:0;i:1;}i:2;i:1233;}i:60;a:3:{i:0;s:16:"listcontent_open";i:1;a:0:{}i:2;i:1233;}i:61;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:33:" 为已存在的topic更新配置";}i:2;i:1237;}i:62;a:3:{i:0;s:17:"listcontent_close";i:1;a:0:{}i:2;i:1270;}i:63;a:3:{i:0;s:14:"listitem_close";i:1;a:0:{}i:2;i:1270;}i:64;a:3:{i:0;s:13:"listitem_open";i:1;a:1:{i:0;i:1;}i:2;i:1270;}i:65;a:3:{i:0;s:16:"listcontent_open";i:1;a:0:{}i:2;i:1270;}i:66;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:33:" 在多个topic上批量重分区";}i:2;i:1274;}i:67;a:3:{i:0;s:17:"listcontent_close";i:1;a:0:{}i:2;i:1307;}i:68;a:3:{i:0;s:14:"listitem_close";i:1;a:0:{}i:2;i:1307;}i:69;a:3:{i:0;s:13:"listitem_open";i:1;a:1:{i:0;i:1;}i:2;i:1307;}i:70;a:3:{i:0;s:16:"listcontent_open";i:1;a:0:{}i:2;i:1307;}i:71;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:63:" 在多个topic上批量重分区(可选partition broker位置)";}i:2;i:1311;}i:72;a:3:{i:0;s:17:"listcontent_close";i:1;a:0:{}i:2;i:1374;}i:73;a:3:{i:0;s:14:"listitem_close";i:1;a:0:{}i:2;i:1374;}i:74;a:3:{i:0;s:11:"listo_close";i:1;a:0:{}i:2;i:1374;}i:75;a:3:{i:0;s:6:"p_open";i:1;a:0:{}i:2;i:1374;}i:76;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:29:"For more details, plz visite ";}i:2;i:1376;}i:77;a:3:{i:0;s:12:"externallink";i:1;a:2:{i:0;s:29:"https://github.com/yahoo/CMAK";i:1;N;}i:2;i:1405;}i:78;a:3:{i:0;s:7:"p_close";i:1;a:0:{}i:2;i:1434;}i:79;a:3:{i:0;s:13:"section_close";i:1;a:0:{}i:2;i:1436;}i:80;a:3:{i:0;s:6:"header";i:1;a:3:{i:0;s:42:"9.4.1 Get the source and change the config";i:1;i:3;i:2;i:1436;}i:2;i:1436;}i:81;a:3:{i:0;s:12:"section_open";i:1;a:1:{i:0;i:3;}i:2;i:1436;}i:82;a:3:{i:0;s:6:"p_open";i:1;a:0:{}i:2;i:1436;}i:83;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:36:"You can get the latest release from ";}i:2;i:1490;}i:84;a:3:{i:0;s:12:"externallink";i:1;a:2:{i:0;s:38:"https://github.com/yahoo/CMAK/releases";i:1;N;}i:2;i:1526;}i:85;a:3:{i:0;s:7:"p_close";i:1;a:0:{}i:2;i:1564;}i:86;a:3:{i:0;s:6:"p_open";i:1;a:0:{}i:2;i:1564;}i:87;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:55:"I download the 3.0.0.4 version(which requires java 11).";}i:2;i:1566;}i:88;a:3:{i:0;s:7:"p_close";i:1;a:0:{}i:2;i:1621;}i:89;a:3:{i:0;s:4:"code";i:1;a:3:{i:0;s:224:"
#Unzip and put it in somewhere you want. I put it here
/opt/kafka/cmak-3.0.0.4

# edit the conf/application.conf file 
cmak.zkhosts="localhost:2181"
basicAuthentication.username="admin"
basicAuthentication.password="xxxx"

";i:1;N;i:2;N;}i:2;i:1628;}i:90;a:3:{i:0;s:13:"section_close";i:1;a:0:{}i:2;i:1862;}i:91;a:3:{i:0;s:6:"header";i:1;a:3:{i:0;s:25:"9.4.2 Run the application";i:1;i:3;i:2;i:1862;}i:2;i:1862;}i:92;a:3:{i:0;s:12:"section_open";i:1;a:1:{i:0;i:3;}i:2;i:1862;}i:93;a:3:{i:0;s:4:"code";i:1;a:3:{i:0;s:339:"
# kafka-manager 默认的端口是9000，可通过 -Dhttp.port，指定端口; -Dconfig.file=conf/application.conf指定配置文件:
# if you system java setup is another jdk, rather than jdk 11. you can use -java-home to specify one.
nohup bin/cmak -java-home /opt/JAVA/jdk-11.0.7 -Dconfig.file=conf/application.conf -Dhttp.port=8080 &
";i:1;N;i:2;N;}i:2;i:1904;}i:94;a:3:{i:0;s:13:"section_close";i:1;a:0:{}i:2;i:2253;}i:95;a:3:{i:0;s:6:"header";i:1;a:3:{i:0;s:27:"9.4.2 Using the cmak Web UI";i:1;i:3;i:2;i:2253;}i:2;i:2253;}i:96;a:3:{i:0;s:12:"section_open";i:1;a:1:{i:0;i:3;}i:2;i:2253;}i:97;a:3:{i:0;s:6:"p_open";i:1;a:0:{}i:2;i:2253;}i:98;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:136:"Open your browser and typing localhost:8080, enter your login and passwd. You will see the welcome page of cmak.
Click on Cluster button";}i:2;i:2292;}i:99;a:3:{i:0;s:6:"entity";i:1;a:1:{i:0;s:2:"->";}i:2;i:2428;}i:100;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:52:"add a new cluster, you will see the following form.
";}i:2;i:2430;}i:101;a:3:{i:0;s:13:"internalmedia";i:1;a:7:{i:0;s:55:":employes:pengfei.liu:data_science:kafka:kafka-cmak.png";i:1;s:0:"";i:2;N;i:3;s:3:"400";i:4;N;i:5;s:5:"cache";i:6;s:7:"details";}i:2;i:2482;}i:102;a:3:{i:0;s:7:"p_close";i:1;a:0:{}i:2;i:2546;}i:103;a:3:{i:0;s:6:"p_open";i:1;a:0:{}i:2;i:2546;}i:104;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:61:"Just fill the first three lines, and don't touch the others. ";}i:2;i:2548;}i:105;a:3:{i:0;s:7:"p_close";i:1;a:0:{}i:2;i:2609;}i:106;a:3:{i:0;s:4:"code";i:1;a:3:{i:0;s:186:"
注意：如果没有在 Kafka 中配置过 JMX_PORT，千万不要选择第一个复选框。

Enable JMX Polling

如果选择了该复选框，Kafka-manager 可能会无法启动。
";i:1;N;i:2;N;}i:2;i:2616;}i:107;a:3:{i:0;s:6:"p_open";i:1;a:0:{}i:2;i:2616;}i:108;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:93:"Now you can monitoring all existing topics and brokers. You will see the interface like this.";}i:2;i:2813;}i:109;a:3:{i:0;s:7:"p_close";i:1;a:0:{}i:2;i:2906;}i:110;a:3:{i:0;s:6:"p_open";i:1;a:0:{}i:2;i:2906;}i:111;a:3:{i:0;s:13:"internalmedia";i:1;a:7:{i:0;s:62:":employes:pengfei.liu:data_science:kafka:kafka_cmak_topics.png";i:1;s:0:"";i:2;N;i:3;s:3:"600";i:4;N;i:5;s:5:"cache";i:6;s:7:"details";}i:2;i:2908;}i:112;a:3:{i:0;s:7:"p_close";i:1;a:0:{}i:2;i:2979;}i:113;a:3:{i:0;s:6:"p_open";i:1;a:0:{}i:2;i:2979;}i:114;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:35:"You can also create topics with it.";}i:2;i:2981;}i:115;a:3:{i:0;s:7:"p_close";i:1;a:0:{}i:2;i:3016;}i:116;a:3:{i:0;s:13:"section_close";i:1;a:0:{}i:2;i:3018;}i:117;a:3:{i:0;s:12:"document_end";i:1;a:0:{}i:2;i:3018;}}