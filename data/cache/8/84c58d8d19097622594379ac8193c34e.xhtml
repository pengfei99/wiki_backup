
<h1 class="sectionedit1" id="optimisation_des_performances_sous_matlab">Optimisation des performances sous Matlab</h1>
<div class="level1">

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Optimisation des performances sous Matlab&quot;,&quot;hid&quot;:&quot;optimisation_des_performances_sous_matlab&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:1,&quot;range&quot;:&quot;1-57&quot;} -->
<h2 class="sectionedit2" id="convertir_un_fichier_m_en_exe_utilisant_matlab_compiler">Convertir un fichier .M en .exe utilisant MATLAB Compiler</h2>
<div class="level2">

<p>
<a href="https://fr.mathworks.com/videos/getting-started-standalone-applications-using-matlab-compiler-100088.html" class="urlextern" title="https://fr.mathworks.com/videos/getting-started-standalone-applications-using-matlab-compiler-100088.html" rel="nofollow">https://fr.mathworks.com/videos/getting-started-standalone-applications-using-matlab-compiler-100088.html</a>
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Convertir un fichier .M en .exe utilisant MATLAB Compiler&quot;,&quot;hid&quot;:&quot;convertir_un_fichier_m_en_exe_utilisant_matlab_compiler&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:2,&quot;range&quot;:&quot;58-236&quot;} -->
<h2 class="sectionedit3" id="matlab_java_heap_memory">Matlab Java Heap Memory</h2>
<div class="level2">

<p>
Matlab runs on a jvm, the jvm heap memory defined how many objects you can load in your jvm, the default heap size is between 256 and 384.
</p>

<p>
You need to increase the heap size if your program creates many objects 
</p>

<p>
The following link shows how to configure it.
</p>

<p>
<a href="https://fr.mathworks.com/help/matlab/matlab_external/java-heap-memory-preferences.html" class="urlextern" title="https://fr.mathworks.com/help/matlab/matlab_external/java-heap-memory-preferences.html" rel="nofollow">https://fr.mathworks.com/help/matlab/matlab_external/java-heap-memory-preferences.html</a>
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Matlab Java Heap Memory&quot;,&quot;hid&quot;:&quot;matlab_java_heap_memory&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:3,&quot;range&quot;:&quot;237-622&quot;} -->
<h2 class="sectionedit4" id="coding_convention">Coding convention</h2>
<div class="level2">

<p>
The Matlab coding convention book is here 
<a href="https://wiki.bioaster.org/_media/ut6/bioinformatique/matlabstyle2_book.pdf" class="urlextern" title="https://wiki.bioaster.org/_media/ut6/bioinformatique/matlabstyle2_book.pdf" rel="nofollow">Download Matlab Style Book</a>
</p>

<p>
The clean code book for best coding practices
<a href="/lib/exe/fetch.php?media=bioinformatique:cleancodeahandbookofagilesoftwarecraftsmanship.pdf" class="media mediafile mf_pdf" title="bioinformatique:cleancodeahandbookofagilesoftwarecraftsmanship.pdf (2.9 MB)">cleancodeahandbookofagilesoftwarecraftsmanship.pdf</a>
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Coding convention&quot;,&quot;hid&quot;:&quot;coding_convention&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:4,&quot;range&quot;:&quot;623-922&quot;} -->
<h2 class="sectionedit5" id="utilisation_de_matlab_au_cc">Utilisation de Matlab au CC</h2>
<div class="level2">

<p>
<a href="https://wiki.bioaster.org/bioinformatique/matlab" class="urlextern" title="https://wiki.bioaster.org/bioinformatique/matlab" rel="nofollow">https://wiki.bioaster.org/bioinformatique/matlab</a>
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Utilisation de Matlab au CC&quot;,&quot;hid&quot;:&quot;utilisation_de_matlab_au_cc&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:5,&quot;range&quot;:&quot;923-1013&quot;} -->
<h2 class="sectionedit6" id="other_usefull_link">Other usefull link</h2>
<div class="level2">

<p>
<a href="http://www.hpc.lsu.edu/training/weekly-materials/2016-Fall/Performance-Matlab-Code-26Oct2016.pdf" class="urlextern" title="http://www.hpc.lsu.edu/training/weekly-materials/2016-Fall/Performance-Matlab-Code-26Oct2016.pdf" rel="nofollow">http://www.hpc.lsu.edu/training/weekly-materials/2016-Fall/Performance-Matlab-Code-26Oct2016.pdf</a>
</p>

<p>
<a href="https://fr.mathworks.com/company/newsletters/articles/programming-patterns-maximizing-code-performance-by-optimizing-memory-access.html" class="urlextern" title="https://fr.mathworks.com/company/newsletters/articles/programming-patterns-maximizing-code-performance-by-optimizing-memory-access.html" rel="nofollow">https://fr.mathworks.com/company/newsletters/articles/programming-patterns-maximizing-code-performance-by-optimizing-memory-access.html</a>
</p>

<p>
<a href="https://fr.mathworks.com/videos/optimizing-and-accelerating-your-matlab-code-107711.html" class="urlextern" title="https://fr.mathworks.com/videos/optimizing-and-accelerating-your-matlab-code-107711.html" rel="nofollow">https://fr.mathworks.com/videos/optimizing-and-accelerating-your-matlab-code-107711.html</a>
</p>

<p>
<a href="http://www.matlabtips.com/optimizing-your-code/" class="urlextern" title="http://www.matlabtips.com/optimizing-your-code/" rel="nofollow">http://www.matlabtips.com/optimizing-your-code/</a>
</p>

<p>
<a href="https://fr.mathworks.com/help/matlab/performance-and-memory.html" class="urlextern" title="https://fr.mathworks.com/help/matlab/performance-and-memory.html" rel="nofollow">https://fr.mathworks.com/help/matlab/performance-and-memory.html</a>
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Other usefull link&quot;,&quot;hid&quot;:&quot;other_usefull_link&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:6,&quot;range&quot;:&quot;1014-1490&quot;} -->
<h2 class="sectionedit7" id="cr_session_du_01_06_2017">CR session du 01/06/2017</h2>
<div class="level2">

<p>
Présents : <strong> PLU, SDI, ZS, AO, PV</strong>
</p>
<ul>
<li class="level1"><div class="li"> Le code de Zohreh a été compilé et testé sur la ferme de calcul du CC ⇒ temps record de traitement d&#039;une image : 79 secondes !!</div>
</li>
<li class="level1 node"><div class="li"> On va créer un script générique pour automatiser les analyses sur la ferme de calcul du CC, il prendra en paramètres :</div>
<ul>
<li class="level3"><div class="li"> Le chemin du répertoire des images à traiter sur GPFS (un répertoire = une expérience)</div>
</li>
<li class="level3"><div class="li"> Le chemin vers l&#039;image background de référence</div>
</li>
<li class="level3"><div class="li"> Le chemin du répertoire où stocker les résultats sur GPFS</div>
</li>
</ul>
</li>
<li class="level1"><div class="li"> Zohreh et Sophie vont demander un compte au centre de calcul et pourront lancer le script ⇒ OK vu avec PV</div>
</li>
<li class="level1"><div class="li"> Introduction à la programmation objet dans Matlab par le Docteur Adama </div>
</li>
<li class="level1"><div class="li"> Sophie va abandonner la librairie vl-feat et utiliser les fonctions internes de Matlab (TODO)</div>
</li>
<li class="level1"><div class="li"> Une fois le code de Sophie “stabilisé” on le compilera et on le scriptera comme pour le code Zohreh</div>
</li>
</ul>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;CR session du 01\/06\/2017&quot;,&quot;hid&quot;:&quot;cr_session_du_01_06_2017&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:7,&quot;range&quot;:&quot;1491-2448&quot;} -->
<h2 class="sectionedit8" id="cr_session_du_16_05_2017">CR session du 16/05/2017</h2>
<div class="level2">

<p>
Présents : <strong>PLU, SDI, ZS, AO, PV</strong>
</p>
<ul>
<li class="level1 node"><div class="li"> Les codes de Zohreh et de Fabian sont sur Gitlab</div>
<ul>
<li class="level2"><div class="li"> ⇒ Celui de Sophie va bientôt y être intégré aussi</div>
</li>
</ul>
</li>
<li class="level1 node"><div class="li"> Le Matlab Java Heap Memory a été augmenté sur la VM de Zohreh (max = 8GB)</div>
<ul>
<li class="level2"><div class="li"> Cela va être fait sur les autres VMs CODIRA</div>
</li>
</ul>
</li>
<li class="level1 node"><div class="li"> La vm de Zohreh  a été upgradé en RAM (16 <abbr title="Gigabyte">GB</abbr> ⇒ 32 <abbr title="Gigabyte">GB</abbr> puis finalement 20 <abbr title="Gigabyte">GB</abbr>)</div>
<ul>
<li class="level2"><div class="li"> Cela va être fait sur les autres VMs CODIRA</div>
</li>
</ul>
</li>
<li class="level1"><div class="li"> Le code de Zohreh va être compilé pour un test d’utilisation sur la ferme de calcul du CC</div>
</li>
<li class="level1"><div class="li"> Optimisation du code du Zohreh (profiling du code, figure, close/clear all force)</div>
</li>
</ul>

<p>
On a divisé le temps de traitement d’une image par deux (250 sec. ⇒ ~ 130 sec.) on doit pouvoir encore faire mieux. 
</p>

<p>
Un autre workshop est prévu pour continuer l’optimisation du code de Zohreh et aborder celui de Sophie
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;CR session du 16\/05\/2017&quot;,&quot;hid&quot;:&quot;cr_session_du_16_05_2017&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:8,&quot;range&quot;:&quot;2449-&quot;} -->